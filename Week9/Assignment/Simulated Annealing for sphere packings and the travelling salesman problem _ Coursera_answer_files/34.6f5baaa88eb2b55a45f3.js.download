(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{"/oUD":function(module,e,t){"use strict";var n=t("MVZn"),i=t.n(n),r=t("VbXa"),s=t.n(r),a=t("17x9"),o=t.n(a),u=t("sbe7"),c=t.n(u),l=t("VXRf"),m=t("kwmr"),d=t("oYk5"),p=t.n(d),b=t("VYij"),h=t.n(b),g=t("+LJP"),S=t("jsrg"),f=t("Zr0k"),v=t("jSbv"),E=t("JrTX"),I=t("5ijc"),w=t("IG+7"),P=t("xPfO"),A=t("VMeS"),C=t("2Ui0"),y=t("yOj8"),T=t("JN/V"),N=t("MEnl"),V=t("pLWS"),R=t("sQ/U"),x=t("s2tf"),k=t("hbUA"),U=function(e){function PeerItemEditView(t,n){var i;return(i=e.call(this,t,n)||this).handleSubmit=function(e){var t=i.props,n=t.computedItem,r=t.latestSubmissionAndRelated,s=t.courseId,a=t.courseSlug;i.context.executeAction(f.d,{itemId:n.id,submission:r.submission,assignmentVersion:r.submissionSchema.assignmentVersion,verifiableId:e,courseId:s,courseSlug:a,userId:R.a.get().id})},i.handleSave=function(){var e=i.props,t=e.computedItem,n=e.latestSubmissionAndRelated,r=e.courseId;i.setState({hasSaved:!0}),i.context.executeAction(f.c,{courseId:r,userId:R.a.get().id,itemId:t.id,submission:n.submission,assignmentVersion:n.submissionSchema.assignmentVersion})},i.updateSubmissionPartGenerator=function(e){return function(t){var n=i.props.latestSubmissionAndRelated,r=p.a.extend(!0,{},n.submission);r.definition.parts[e]=t,i.context.executeAction(f.a,{submission:r})}},i.blockSubmitPartGenerator=function(e){return function(t){var n=i.state.blockSubmitParts,r=Object.assign({},n);r[e]=t,i.setState({blockSubmitParts:r})}},i.updateSubmissionTitle=function(e){var t=i.props.latestSubmissionAndRelated,n=p.a.extend(!0,{},t.submission);n.definition.title=e,i.context.executeAction(f.a,{submission:n})},i.renderPreviewGradingCriteria=function(e){var t=i.props.latestSubmissionAndRelated;return c.a.createElement(V.a,{reviewSchema:t.reviewSchema,partId:e})},i.state={hasSaved:!1,blockSubmitParts:{}},i}var t;return s()(PeerItemEditView,e),PeerItemEditView.prototype.render=function render(){var e=this.props,t=e.naptimeSubmission,n=e.naptimeSubmissionSchema,i=e.errorTree,r=e.computedItem,s=e.submissionAppState,a=e.isVerifiable,o=e.lastSaveTime,u=e.showStaleAssignmentVersionError,l=e.courseId,m=e.courseBranchId,d=r.id,p=this.state.hasSaved,b=h.a.contains(h.a.values(this.state.blockSubmitParts),!0);return c.a.createElement("div",{className:"rc-PeerItemEditView"},c.a.createElement(x.a,{itemId:d,courseBranchId:m,courseId:l,hasSaved:p}),c.a.createElement(T.a,{submissionAppState:s,errorTree:i,isSubmitted:!1},c.a.createElement(C.a,{showStaleAssignmentVersionError:u,computedItem:r}),c.a.createElement(N.a,{courseId:l,submission:t,submissionSchema:n,errorTree:i,isSubmitted:!1,submissionAppState:s,updateSubmissionTitle:this.updateSubmissionTitle,updateSubmissionPartGenerator:this.updateSubmissionPartGenerator,blockSubmitPartGenerator:this.blockSubmitPartGenerator,renderInlineNode:this.renderPreviewGradingCriteria}),c.a.createElement(y.a,{submissionAppState:s,lastSaveTime:o,handleSave:this.handleSave,handleSubmit:this.handleSubmit,blockSubmit:b,isVerifiable:a,computedItem:r})))},PeerItemEditView}(c.a.Component);U.contextTypes={executeAction:o.a.func.isRequired},e.a=h.a.compose(Object(g.a)(function(e){return{showStaleAssignmentVersionError:!!e.location.query.showStaleAssignmentVersionError}}),Object(m.a)([v.a,E.a,I.a,w.a,P.a],function(e,t,n,i,r,s){var a=s.computedItem;return{latestSubmissionAndRelated:e.getState().latestSubmissionAndRelated,naptimeSubmission:e.getState().naptimeSubmission,naptimeSubmissionSchema:e.getState().naptimeSubmissionSchema,submissionAppState:t.getState(),isVerifiable:n.isProductVerificationEnabled()&&a&&Object(k.i)(a),courseId:i.getCourseId(),courseSlug:i.getCourseSlug(),courseBranchId:r.getBranchId()||i.getCourseId()}}),Object(S.a)(function(e){var t;return e.latestSubmissionAndRelated},c.a.createElement(A.a,{className:"rc-PeerItemEditView"})),Object(l.a)(function(e){return i()({},e,{errorTree:e.latestSubmissionAndRelated.errorTree,lastSaveTime:e.latestSubmissionAndRelated.submission&&e.latestSubmissionAndRelated.submission.createdAt})}))(U)},"12aJ":function(module,e,t){"use strict";var n=t("8cuT"),i=t.n(n),r=t("sbe7"),s=t.n(r),a=t("VYij"),o=t.n(a),u=t("L1vm"),c=t("VWxS"),l=t("jsrg"),m=t("6xos"),d=t("qPyB"),p=t("s2tf"),b=t("IG+7"),h=t("xPfO"),g=function PeerItemSubmittedView(e){var t=e.lastSaveTime,n=e.computedItem,i=e.title,r=e.submissionId,a=e.courseBranchId,o=e.courseId,u=e.isResubmissionAllowed;return s.a.createElement("div",{className:"rc-PeerItemSubmittedView rc-AssignmentSubmit"},s.a.createElement(p.a,{itemId:n.id,courseBranchId:a,courseId:o,hasSubmitted:!0}),s.a.createElement(m.a,{title:i,createdAt:t,shareableLink:s.a.createElement(d.a,{computedItem:n,submissionId:r})}),s.a.createElement(c.a,{courseId:o,computedItem:n,isResubmissionAllowed:u}))};e.a=o.a.compose(i()(["PeerViewSubmissionStore",b.a,h.a],function(e){var t=e.PeerViewSubmissionStore,n=e.CourseStore,i=e.SessionStore,r,s,a;return t.getState().submissionAndRelated&&(a=t.getState().submissionAndRelated.submission.definition.title,s=t.getState().submissionAndRelated.submission.id,r=t.getState().submissionAndRelated.submission.createdAt),{title:a,submissionId:s,lastSaveTime:r,courseId:n.getCourseId(),courseBranchId:i.getBranchId()||n.getCourseId()}}),Object(l.a)(function(e){return e.submissionId}),u.a.createTrackedContainer(function(){return{namespace:{page:"peer_review_my_project_review"}}}))(g)},"1N/A":function(module,e,t){"use strict";var n=t("VbXa"),i=t.n(n),r=t("sbe7"),s=t.n(r),a=t("oYk5"),o=t.n(a),u=t("w/1P"),c=t.n(u),l=t("yhVA"),m=t.n(l),d=function(e){function UrlEditView(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).onChangeUrl=function(e){var n=t.props,i=n.submissionPart,r=n.update,s=o.a.extend(!0,{},i);s.definition.url=e.target.value,r(s)},t.onChangeTitle=function(e){var n=t.props,i=n.submissionPart,r=n.update,s=o.a.extend(!0,{},i);s.definition.title=e.target.value,r(s)},t.onChangeCaption=function(e){var n=t.props,i=n.submissionPart,r=n.update,s=o.a.extend(!0,{},i);s.definition.caption=e.target.value,r(s)},t}var t;return i()(UrlEditView,e),UrlEditView.prototype.render=function render(){var e=this.props,t=e.submissionPart,n=e.id;if("url"!==t.typeName)return null;return s.a.createElement("div",{className:"rc-UrlEditView"},s.a.createElement("input",{id:"input-".concat(n),className:"c-peer-review-submit-text-field c-peer-review-submit-text-field-group-top bt3-form-control",type:"text",placeholder:m()("URL"),"aria-labelledby":n,defaultValue:t.definition.url,onChange:this.onChangeUrl,disabled:this.props.disabled}),t.definition.url&&s.a.createElement("div",null,s.a.createElement("div",{className:"c-peer-review-submit-text-field-container"},s.a.createElement("input",{className:c()("c-peer-review-submit-text-field","c-peer-review-submit-text-field-group-middle","bt3-form-control"),type:"text",placeholder:m()("Title"),defaultValue:t.definition.title,onChange:this.onChangeTitle,disabled:this.props.disabled}),!t.definition.title&&s.a.createElement("div",{className:"c-peer-review-submit-text-field-annotation"},m()("optional"))),s.a.createElement("div",{className:"c-peer-review-submit-text-field-container"},s.a.createElement("textarea",{className:c()("c-peer-review-submit-text-field","c-peer-review-submit-text-field-group-bottom","bt3-form-control"),placeholder:m()("Caption"),defaultValue:t.definition.caption,onChange:this.onChangeCaption,disabled:this.props.disabled}),!t.definition.caption&&s.a.createElement("div",{className:"c-peer-review-submit-text-field-annotation"},m()("optional")))))},UrlEditView}(s.a.Component);e.a=d},"1Nwa":function(module,exports,e){var t=e("y6f+"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var i={transform:void 0},r=e("aET+")(t,i);t.locals&&(module.exports=t.locals)},"22n8":function(module,exports,e){},"2Ui0":function(module,e,t){"use strict";var n=t("VbXa"),i=t.n(n),r=t("17x9"),s=t.n(r),a=t("sbe7"),o=t.n(a),u=t("MnCE"),c=t("8cuT"),l=t.n(c),m=t("i4j5"),d=t("Zr0k"),p=t("sQ/U"),b=function(e){function PeerItemUpgradeNotification(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).onRequestUpgrade=function(){var e=t.props,n=e.courseId,i=e.courseSlug,r=e.computedItem.id,s=e.submission,a=e.assignmentVersion,o=e.forceUpgradeToAssignmentVersion;t.context.executeAction(d.e,{itemId:r,submission:s,assignmentVersion:a,forceUpgradeToAssignmentVersion:o,courseId:n,courseSlug:i,userId:p.a.get().id})},t}var t;return i()(PeerItemUpgradeNotification,e),PeerItemUpgradeNotification.prototype.render=function render(){if(null==this.props.upgradeToCurrentAssignment)return null;return o.a.createElement("div",{className:"rc-PeerItemUpgradeNotification"},o.a.createElement(m.a,{onRequestUpgrade:this.onRequestUpgrade,upgradeToCurrentAssignment:this.props.upgradeToCurrentAssignment,showStaleAssignmentVersionError:this.props.showStaleAssignmentVersionError}))},PeerItemUpgradeNotification}(o.a.Component);b.contextTypes={executeAction:s.a.func.isRequired},e.a=Object(u.compose)(l()(["PeerSubmissionDraftStore","CourseStore"],function(e){var t=e.PeerSubmissionDraftStore,n=e.CourseStore,i,r=t.getState().latestSubmissionAndRelated,s=null,a=null,o=null;return null!=r&&(s=r.upgradeToCurrentAssignment,a=r.submissionSchema.assignmentVersion,o=r.upgradeToCurrentAssignment&&r.upgradeToCurrentAssignment.upgradeToVersion),{submission:r&&r.submission,upgradeToCurrentAssignment:s,assignmentVersion:a,forceUpgradeToAssignmentVersion:o,courseId:n.getCourseId(),courseSlug:n.getCourseSlug()}}))(b)},"2q9w":function(module,e,t){"use strict";var n=t("VbXa"),i=t.n(n),r=t("sbe7"),s=t.n(r),a=t("MnCE"),o=t("w/1P"),u=t.n(o),c=t("rQpo"),l=t("y1LI"),m=t("AWZ4"),d=t("Ihj9"),p=t("hbUA"),b=t("8cuT"),h=t.n(b),g=t("yhVA"),S=t.n(g),f=t("kvW3"),v=t("JvZ4"),E=t("ZAK3"),I=t.n(E),w=Object(d.a)({type:"BUTTON"})(m.b),P=function(e){function AssignmentSubmitControls(){return e.apply(this,arguments)||this}var t;return i()(AssignmentSubmitControls,e),AssignmentSubmitControls.prototype.render=function render(){var e=u()("rc-AssignmentSubmitControls","horizontal-box","align-items-right","align-items-vertical-center"),t=this.props,n=t.computedItem,i=t.courseId,r=t.lastSaveTime,a=Object(p.m)(n);return s.a.createElement("div",{className:e},s.a.createElement("div",{className:"save-state-display horizontal-box"},r&&r>0?s.a.createElement("div",{className:"color-secondary-text caption-text"},s.a.createElement(f.b,{message:S()("Last saved on {lastSaveDate} at {lastSaveTime}"),lastSaveDate:Object(v.q)(r,v.c),lastSaveTime:Object(v.q)(r,v.n)})):s.a.createElement("div",{className:"color-secondary caption-text"},S()("This project has not been saved."))),a&&s.a.createElement(c.a,{courseId:i}),!a&&s.a.createElement("div",null,s.a.createElement(w,{type:"secondary",rootClassName:"save-draft","data-e2e":"save-draft",disabled:this.props.isSaving||this.props.isSubmitting,onClick:this.props.onSave,trackingName:"save"},this.props.isSaving?s.a.createElement(l.a,{name:"spinner",className:"cif-spin"}):S()("Save draft")),s.a.createElement(w,{type:"primary",rootClassName:"preview","data-e2e":"preview",onClick:this.props.onSubmit,disabled:this.props.isSaving||this.props.isSubmitting||this.props.isSubmitDisabled,trackingName:"submit"},this.props.isSubmitting?s.a.createElement(l.a,{name:"spinner",className:"cif-spin"}):this.props.submitMessage)))},AssignmentSubmitControls}(s.a.Component);P.defaultProps={submitMessage:S()("Submit for review"),isSubmitDisabled:!1},e.a=Object(a.compose)(h()(["CourseStore"],function(e){var t;return{courseId:e.CourseStore.getCourseId()}}))(P)},"4suC":function(module,e,t){"use strict";t.r(e);var n=t("VbXa"),i=t.n(n),r=t("sbe7"),s=t.n(r),a=t("8cuT"),o=t.n(a),u=t("VYij"),c=t.n(u),l=t("jsrg"),m=t("L1vm"),d=t("nLAy"),p=t("dAof"),b=t("VMeS"),h=t("12aJ"),g=t("gBtg"),S=t("/oUD"),f=t("sQ/U"),v=function(e){function PeerItemSubmit(){return e.apply(this,arguments)||this}var t;return i()(PeerItemSubmit,e),PeerItemSubmit.prototype.render=function render(){var e=this.props,t=e.isSubmitted,n=e.latestSubmissionId,i=e.computedItem,r=e.loadedPeerViewSubmissionId,a=e.isResubmissionAllowed,o=r!==n;return s.a.createElement(g.a,{isSubmitted:t,editView:s.a.createElement(S.a,{computedItem:i}),submittedView:o?s.a.createElement(b.a,{className:"rc-PeerItemSubmit"}):s.a.createElement(h.a,{computedItem:i,isResubmissionAllowed:a})})},PeerItemSubmit}(s.a.Component),E=c.a.compose(m.a.createTrackedContainer(function(){return{namespace:{page:"peer_review_my_project"}}}),o()(["CourseStore","PeerViewSubmissionStore","PeerPermissionsAndProgressesStore"],function(e,t){var n=e.CourseStore,i=e.PeerViewSubmissionStore,r=e.PeerPermissionsAndProgressesStore,s=t.computedItem;return{isPeerProgressesLoaded:"loaded"===r.getState().loadState,loadedPeerViewSubmissionId:i.getState().submissionId,isSubmitted:r.getState().isSubmitted,latestSubmissionId:r.getState().latestSubmissionId,courseId:n.getCourseId()}}),Object(l.a)(function(e){var t;return e.isPeerProgressesLoaded},s.a.createElement(b.a,{className:"rc-PeerItemSubmit"})),Object(p.a)(function(e,t){var n=t.computedItem,i=t.courseId,r=t.isSubmitted,s=t.latestSubmissionId,a=t.loadedPeerViewSubmissionId,o;r&&s&&(a!==s&&e.executeAction(d.d,{userId:f.a.get().id,courseId:i,itemId:n.id,submissionId:s}))}))(v);e.default=E},"7AOT":function(module,e,t){"use strict";var n=t("VbXa"),i=t.n(n),r=t("welz"),s=t.n(r),a=t("17x9"),o=t.n(a),u=t("sbe7"),c=t.n(u),l=t("9can"),m=t("+2ZD"),d=t("37kS"),p=t.n(d),b=t("cbTo"),h=t.n(b),g=function(e){function GradingCriteriaPreviewModal(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).state={showModal:!1},t.onClickModalOpen=function(e){e.preventDefault(),t.setState({showModal:!0})},t.onClickModalClose=function(){t.setState({showModal:!1})},t}var t;return i()(GradingCriteriaPreviewModal,e),GradingCriteriaPreviewModal.prototype.render=function render(){if(0===this.props.criteria.length)return null;return c.a.createElement("div",{className:"rc-GradingCriteriaPreviewModal"},c.a.createElement("button",{onClick:this.onClickModalOpen,className:"button-link"},p()("Preview grading criteria")),this.state.showModal&&c.a.createElement(m.a,{handleClose:this.onClickModalClose,modalName:p()("Preview grading criteria")},c.a.createElement("h1",null,p()("Preview grading criteria")),this.props.privilegedRoleViewReviewSchema&&c.a.createElement("div",{className:"criteria-warning color-warn-dark"},p()("You can preview the grading criteria because you have a privileged role in this course. Normal\n                  learners cannot see the grading criteria until they submit a submission.")),this.props.criteria.map(function(e){return c.a.createElement("div",{className:"criterion card-no-action compact",key:e.get("id")},c.a.createElement(l.a,{content:e.get("prompt"),assumeStringIsHtml:!1}))})))},GradingCriteriaPreviewModal}(c.a.Component);g.propTypes={criteria:o.a.arrayOf(o.a.instanceOf(s.a.Model)).isRequired,privilegedRoleViewReviewSchema:o.a.bool.isRequired},e.a=g},"9Cgw":function(module,e,t){"use strict";t.d(e,"b",function(){return r}),t.d(e,"a",function(){return o});var n={SUBMITTING:"submitting",SUBMIT_ERROR:"submitError",READY:"ready",SAVING:"saving",SAVE_ERROR:"saveError"},i=n,r=n.SUBMITTING,s=n.SUBMIT_ERROR,a=n.READY,o=n.SAVING,u=n.SAVE_ERROR},BBeU:function(module,exports,e){},C6SX:function(module,exports,e){var t=e("lH5E"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var i={transform:void 0},r=e("aET+")(t,i);t.locals&&(module.exports=t.locals)},"JN/V":function(module,e,t){"use strict";var n=t("sbe7"),i=t.n(n),r=t("Ux1H"),s=function EditView(e){var t=e.submissionAppState,n=e.errorTree,s=e.isSubmitted,a=e.children;return i.a.createElement("div",{className:"rc-AssignmentEditView rc-AssignmentSubmit"},i.a.createElement(r.a,{isSubmitted:s,submissionAppState:t,errorTree:n}),i.a.createElement("div",null,a))};e.a=s},JOPA:function(module,exports,e){var t=e("M+X1"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var i={transform:void 0},r=e("aET+")(t,i);t.locals&&(module.exports=t.locals)},KwvP:function(module,e,t){"use strict";var n=t("XqAp"),i=t("+MHB"),r=new n.a;r.start(i.a.router),e.a=r},"M+X1":function(module,exports,e){},MEnl:function(module,e,t){"use strict";var n=t("MVZn"),i=t.n(n),r=t("VbXa"),s=t.n(r),a=t("sbe7"),o=t.n(a),u=t("e6Tq"),c=t("mk7w"),l=t("qC2T"),m=t.n(l),d=t("i5JE"),p=t.n(d),b=function(e){function AssignmentSubmitEditView(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).state={firstValidationError:null,titleHasError:!1,firstSubmissionSchemaPartWithError:null},t.handleTitleChange=function(e){var n=t.props.updateSubmissionTitle;e.target instanceof HTMLInputElement&&n(e.target.value)},t.handleInputWithErrorFocus=function(){var e,n,i=(t.props.submissionAppState||{}).showValidation,r=t.state,s=r.firstSubmissionSchemaPartWithError,a=r.titleHasError;if(i){var o=document.getElementById("input-".concat((s||{}).id));if(a)return void(t.titleInputRef&&t.titleInputRef.focus());s&&o&&o.focus()}},t.getFirstSubmissionSchemaPartWithError=function(){var e=t.props,n=e.submissionSchema,i=e.errorTree;return n.parts.find(function(e){var t=e.id;return(((i.children||{})[t]||{}).errors||[]).length>0})},t.updateFirstValidationError=function(){var e=t.props,n=e.submissionAppState,i=e.errorTree,r,s=null;if(n.showValidation){var a=t.state,o=a.firstSubmissionSchemaPartWithError,u;a.titleHasError?s=i.errors&&i.errors.map(function(e){return e.errorMessage}).join(" "):o&&(s=(((i.children||{})[o.id]||{}).errors||[]).map(function(e){return e.errorMessage}).join(" "))}t.setState({firstValidationError:s},t.handleInputWithErrorFocus)},t}s()(AssignmentSubmitEditView,e);var t=AssignmentSubmitEditView.prototype;return t.componentDidUpdate=function componentDidUpdate(e){var t=this.props,n=t.submissionAppState,r=t.errorTree,s=n.showValidation;if(e.submissionAppState.showValidation!==s){var a=this.getFirstSubmissionSchemaPartWithError(),o;a&&(o=a),this.setState(i()({titleHasError:r.errors&&r.errors.length>0},{firstSubmissionSchemaPartWithError:o}),this.updateFirstValidationError)}},t.render=function render(){var e=this,t=this.props,n=t.courseId,i=t.submission,r=t.submissionSchema,s=t.errorTree,a=t.isSubmitted,l=t.submissionAppState,d=l.saveState,p=l.submitState,b=l.showValidation,h=t.renderInlineNode,g=t.updateSubmissionPartGenerator,S=t.blockSubmitPartGenerator,f=this.state.firstValidationError,v="saving"===d||"submitting"===p||a;return o.a.createElement("div",{className:"rc-AssignmentSubmitEditView"},o.a.createElement("span",null,"".concat(m()("Project Title")," "),"*"),o.a.createElement("input",{className:"c-peer-review-submit-text-field bt3-form-control",type:"text",defaultValue:i.title,placeholder:"Give your project a descriptive title",onChange:this.handleTitleChange,"aria-required":!0,disabled:v,id:"title",ref:function ref(t){e.titleInputRef=t}}),b&&o.a.createElement(c.a,{errorTree:s}),o.a.createElement("div",{className:"parts"},r.parts.map(function(e){var t=null;return t=i.parts&&i.parts[e.id]?i.parts[e.id]:i.invalidParts[e.id],o.a.createElement(u.a,{courseId:n,key:e.id,partId:e.id,submissionSchemaPart:e,submissionPart:t,update:g(e.id),blockSubmit:S(e.id),disabled:v,errorTree:s&&s.children[e.id],showValidation:b,renderInlineNode:h})})),o.a.createElement("div",{className:"sr-only","aria-live":"assertive",role:"region"},b&&f))},AssignmentSubmitEditView}(o.a.Component);e.a=b},NxPu:function(module,e,t){"use strict";var n=t("PGBY"),i="cml",r={dtdId:"assess/1",value:"<co-content><text></text></co-content>"};function getImageUploadOptions(e,t){return{context:{courseId:e,itemId:t},pendingAssetCreation:{assetType:"image",typeName:"pending",tags:[]},assetCreationUrl:"/api/onDemandPeerAssetCreationAttempts.v1"}}var s=[n.o.Bold,n.o.Italic,n.o.Underline,n.o.Divider,n.o.Link,n.o.Unlink,n.o.OrderedList,n.o.UnorderedList,n.o.Code];e.a={getImageUploadOptions:getImageUploadOptions,richTextBlocks:s}},"OF+3":function(module,exports,e){},PSGO:function(module,e,t){"use strict";var n=t("sbe7"),i=t.n(n),r=t("oYk5"),s=t.n(r),a=function PlainTextEditView(e){var t=e.submissionPart,n=e.update,r=e.disabled,a=e.partId,o=e.id;if("plainText"!==t.typeName)return null;return i.a.createElement("textarea",{id:o,defaultValue:t.definition.plainText,className:"c-peer-review-submit-text-field bt3-form-control","aria-labelledby":a,onChange:function onChange(e){var i=s.a.extend(!0,{},t);i.definition.plainText=e.target.value,n(i)},disabled:r})};e.a=a},PfZc:function(module,e,t){"use strict";var n=t("VbXa"),i=t.n(n),r=t("sbe7"),s=t.n(r),a=t("w/1P"),o=t.n(a),u=t("C9+b"),c=t("NxPu"),l=t("JUgE"),m=t("R6Zj"),d=t.n(m),p=function(e){function RichTextCMLEditor(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).state={isFocused:!1},t.onFocus=function(){t.setState({isFocused:!0})},t.onBlur=function(){t.setState({isFocused:!1})},t}var t;return i()(RichTextCMLEditor,e),RichTextCMLEditor.prototype.render=function render(){var e=this.props,t=e.content,n=e.courseId,i=e.itemId,r=e.onChange,a=e.id,m;if(e.disabled)return s.a.createElement(l.a,{cml:t,id:a});var d=this.state.isFocused;return s.a.createElement("div",{className:o()("rc-RichTextCmlEditor",{focused:d})},s.a.createElement(u.a,{blocks:c.a.richTextBlocks,onFocus:this.onFocus,onBlur:this.onBlur,changeDelay:0,cml:t,imageUploadOptions:c.a.getImageUploadOptions(n,i),onChange:r,id:a}))},RichTextCMLEditor}(s.a.Component);e.a=p},PmkO:function(module,exports,e){var t=e("22n8"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var i={transform:void 0},r=e("aET+")(t,i);t.locals&&(module.exports=t.locals)},R6Zj:function(module,exports,e){var t=e("mXC1"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var i={transform:void 0},r=e("aET+")(t,i);t.locals&&(module.exports=t.locals)},TPZh:function(module,exports,e){},Ux1H:function(module,e,t){"use strict";var n=t("VbXa"),i=t.n(n),r=t("17x9"),s=t.n(r),a=t("sbe7"),o=t.n(a),u=t("VYij"),c=t.n(u),l=t("w/1P"),m=t.n(l),d=t("yhVA"),p=t.n(d),b=function(e){function AssignmentSubmitAlertsView(){return e.apply(this,arguments)||this}var t;return i()(AssignmentSubmitAlertsView,e),AssignmentSubmitAlertsView.prototype.render=function render(){var e=this.props,t=e.isSubmitted,n=e.submissionAppState,i=n.submitState,r=n.saveState,s=n.showValidation,a=n.errorMessage,u=e.errorTree;if(!u||!s)return null;if(t)return o.a.createElement("div",{className:"rc-AssignmentSubmitAlertsView"},p()("Your work is submitted."));var l=c()(AssignmentSubmitAlertsView.getAllErrors(u)).some(c.a.property("blocksSubmit")),d=!!a,b=!a&&"ready"===i&&"ready"===r&&l,h=!a&&"saveError"===r&&!a,g=!a&&"submitError"===i&&"ready"===r&&l,S=!a&&"submitError"===i&&"ready"===r&&!l,f=m()("rc-AssignmentSubmitAlertsView","bt3-alert",{"bt3-alert-warning":b,"bt3-alert-danger":d||h||g||S});if(!(d||b||h||g||S))return null;return o.a.createElement("div",{className:f},d&&o.a.createElement("span",null,a),g&&o.a.createElement("span",null,p()("Error submitting assignment: please fix the errors below before submitting.")),b&&o.a.createElement("span",null,p()("Your assignment was saved, but please fix the errors below before submitting.")),S&&o.a.createElement("span",null,p()("Your assignment was saved, but an unknown error occurred while submitting.\n              Please refresh the page and try again.")),h&&o.a.createElement("span",null,p()("Save error. Please try again.")))},AssignmentSubmitAlertsView}(o.a.Component);b.propTypes={errorTree:s.a.object,isSubmitted:s.a.bool.isRequired,submissionAppState:s.a.shape({saveState:s.a.oneOf(["ready","saving","saveError"]),submitState:s.a.oneOf(["ready","submitting","submitError"]),showValidation:s.a.bool})},b.getAllErrors=function(e){if(!e)return[];var t=c()(e.children).chain().map(function(e){return b.getAllErrors(e)}).flatten().value();return e.errors.concat(t)},e.a=b},VWxS:function(module,e,t){"use strict";var n=t("VbXa"),i=t.n(n),r=t("sbe7"),s=t.n(r),a=t("8cuT"),o=t.n(a),u=t("VYij"),c=t.n(u),l=t("yhVA"),m=t.n(l),d=t("J2aD"),p=t("7Diq"),b=t("1xaR"),h=t("C2np"),g=t("VMeS"),S=t("j/mg"),f=t("eQF6"),v=t("yMmU"),E=t("jsrg"),I=t("hbUA"),w=t("PmkO"),P=t.n(w),A=function(e){function PeerSubmissionWithReviewBody(){return e.apply(this,arguments)||this}i()(PeerSubmissionWithReviewBody,e);var t=PeerSubmissionWithReviewBody.prototype;return t.shouldShowReviews=function shouldShowReviews(e){var t=this.props,n=t.reviewProgress,i=t.reviewSchema,r=t.reviews,s=t.computedItem,a=s.isGraded,o;if(0===(null!=i?c()(i.definition.parts).filter(function(t){return t.submissionSchemaPartId===e}):[]).length||a&&Object(I.y)(s))return!1;return!!r&&r.length>0&&(!n||n&&n.isComplete)},t.render=function render(){var e=this,t=this.props,n=t.courseId,i=t.computedItem,r=t.submission,a=t.submissionId,o=t.submissionSchema,u=t.reviewSchema,c=t.reviewsSummary,l=t.reviews,g=t.isResubmissionAllowed,E=Object(b.a)(u);return s.a.createElement("div",{className:"rc-PeerSubmissionWithReviewsBody"},o.parts.map(function(t){return s.a.createElement(f.a,{key:t.id},s.a.createElement(d.a,{submissionSchemaPart:t,submissionPart:r.parts[t.id]}),e.shouldShowReviews(t.id)&&s.a.createElement(v.a,null,s.a.createElement(p.a,{reviewSchema:E,reviewsSummary:c,reviews:l,submissionSchemaPartId:t.id,submissionId:a})))}),this.shouldShowReviews()&&s.a.createElement(f.a,null,s.a.createElement(v.a,null,s.a.createElement(p.a,{reviewSchema:E,reviewsSummary:c,reviews:l,submissionSchemaPartId:null,submissionId:a}))),null!==a&&g&&s.a.createElement(S.a,{computedItem:i,submissionId:a,className:"align-right",buttonMessage:m()("Edit submission")}),null!=a&&s.a.createElement(h.a,{computedItem:i,courseId:n,submissionId:a}))},PeerSubmissionWithReviewBody}(s.a.Component);e.a=c.a.compose(o()(["PeerViewSubmissionStore","PeerPermissionsAndProgressesStore"],function(e){var t=e.PeerViewSubmissionStore,n=e.PeerPermissionsAndProgressesStore,i=t.getState().submissionAndRelated,r,s=t.getState().reviewSubmissionState,a="loaded"===t.getState().loadState,o;a&&null!=s&&(o=s.backboneReviews);var u=n.getState().receivedReviewProgresses,c=u&&u.evaluationIfReady?{typeName:"structured",definition:u.evaluationIfReady.aggregatedReviewsSummary}:null,l=u?{isComplete:!!u.evaluationIfReady,earliestCompletionTime:u.earliestCompletionTime,reviewCount:u.reviewCount,minCompletionReviewCount:u.defaultReceivedReviewRequiredCount}:null;return{submission:t.getState().naptimeSubmission,submissionId:t.getState().submissionId,reviews:o,reviewSchema:i&&i.reviewSchema,submissionSchema:t.getState().naptimeSubmissionSchema,reviewsSummary:c,reviewProgress:l,isPeerViewSubmissionStoreLoaded:a}}),Object(E.a)(function(e){return e.isPeerViewSubmissionStoreLoaded},s.a.createElement(g.a,{className:"rc-PeerSubmissionWithReviewsBody"})))(A)},XgYJ:function(module,e,t){"use strict";var n=t("VbXa"),i=t.n(n),r=t("SDZF"),s=t("QjDL"),a=function(e){function AlicePeerReviewSubmitEvent(t){var n,i=t.courseBranchId,r=t.itemId;return(n=e.call(this,{type:s.i,courseBranchId:i})||this).itemId=r,n.id="".concat(s.i,"~").concat(i,"~").concat(r),n}return i()(AlicePeerReviewSubmitEvent,e),AlicePeerReviewSubmitEvent}(r.a);e.a=a},ZAK3:function(module,exports,e){var t=e("OF+3"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var i={transform:void 0},r=e("aET+")(t,i);t.locals&&(module.exports=t.locals)},Zr0k:function(module,e,t){"use strict";t.d(e,"a",function(){return c}),t.d(e,"c",function(){return m}),t.d(e,"b",function(){return d}),t.d(e,"e",function(){return p}),t.d(e,"d",function(){return b});var n=t("Q3zy"),i=t("5AUN"),r=t("Ef0b"),s=t("Hk9X"),a=t("uhR6"),o=function onSaveSuccess(e){return function(t){return e.dispatch(a.a.PEER_SUBMIT_UPDATE_ALERTS,{severity:"warning"}),e.dispatch(a.a.PEER_SUBMIT_UPDATE_LATEST_SUBMISSION_DRAFT,{latestSubmissionAndRelated:t}),e.dispatch(a.a.PEER_SUBMISSION_APP_STATE_SAVE_SUCCESS),t}},u=function onSaveFailure(e){return function(t){if(t.responseJSON||t.status)return e.dispatch(a.a.PEER_SUBMISSION_APP_STATE_SAVE_ERROR,{statusCode:t.status,response:t.responseJSON}),null;throw t}},c=function localUpdateSubmission(e,t){var n=t.submission;e.dispatch(a.a.PEER_SUBMIT_LOCAL_UPDATE_DRAFT_SUBMISSION,{submission:n})},l=function updateSubmissionDraft(e){var t=e.userId,i=e.courseId,r=e.itemId,s=e.submission;if(null==s.versionedAssignmentId)throw new Error("Error saving draft submission: could not find existing assignment id");return n.c({userId:t,courseId:i,itemId:r,submissionDraftUpdate:{submission:{title:s.definition.title,parts:s.definition.parts},attachedAssignmentId:s.versionedAssignmentId}})},m=function saveSubmission(e,t){var n=t.userId,i=t.courseId,r=t.itemId,c=t.submission,m=t.assignmentVersion;return e.dispatch(a.a.PEER_SUBMISSION_APP_STATE_SAVING),l({userId:n,courseId:i,itemId:r,submission:c}).then(function(e){return Object(s.d)(e)}).then(o(e),u(e))},d=function resetSubmission(e,t){var n=t.courseId,s=t.courseSlug,a=t.userId,o=t.itemId,u=t.submissionId;return i.b({userId:a,courseId:n,itemId:o,submissionId:u}).then(function(){return e.executeAction(r.c,{itemId:o,userId:a,courseId:n,courseSlug:s})})},p=function upgradeSubmission(e,t){var i=t.assignmentVersion,a=t.forceUpgradeToAssignmentVersion,o=t.itemId,c=t.courseId,m=t.courseSlug,d=t.userId,p=t.submission;if(null==p.versionedAssignmentId)throw new Error("Error upgrading assignment: could not find existing assignment id");var b="".concat(p.versionedAssignmentId.split("@")[0],"@").concat(a);return n.a({userId:d,courseId:c,itemId:o,forceUpgradeToAssignmentId:b}).then(function(e){return Object(s.f)(e)}).then(function(e){return l({itemId:o,submission:e,courseId:c,userId:d})}).then(function(e){return Object(s.d)(e)}).catch(u(e)).then(function(){return e.executeAction(r.c,{itemId:o,userId:d,courseId:c,courseSlug:m})})},b=function submitSubmission(e,t){var n=t.itemId,c=t.submission,m=t.assignmentVersion,d=t.verifiableId,p=t.courseId,b=t.courseSlug,h=t.userId;return e.dispatch(a.a.PEER_SUBMISSION_APP_STATE_SUBMITTING),l({itemId:n,submission:c,courseId:p,userId:h}).then(function(e){return Object(s.d)(e)}).then(o(e),u(e)).then(function(e){var t=!1;if(e&&e.errorTree&&e.errorTree.errors&&(t=!!e.errorTree.errors.find(function(e){return e.blocksSubmit})),t||!e)throw new Error("submit blocked by errors");return e}).then(function(e){return i.d({courseId:p,itemId:n,verifiableId:d,draftCreatedAt:e.submission.createdAt})}).then(function(){return e.dispatch(a.a.PEER_SUBMISSION_APP_STATE_SUBMIT_SUCCESS),e.executeAction(r.c,{itemId:n,userId:h,courseId:p,courseSlug:b})}).catch(function(){return e.dispatch(a.a.PEER_SUBMISSION_APP_STATE_SUBMIT_ERROR)})}},aPOU:function(module,e,t){"use strict";var n=t("sbe7"),i=t.n(n),r=t("oYk5"),s=t.n(r),a=t("PfZc"),o=t("nU/4"),u=t("r6aM"),c=function RichTextEditView(e){var t=e.courseId,i=e.submissionPart,r=e.update,c=e.disabled,l=e.partId,m=e.submissionSchemaPart,d=function mapContentFn(e){return e},p=i.definition.richText;if("richText"!==i.typeName||"string"==typeof p)return null;var b,h=p.typeName,g="cml"===h?a.a:o.a;"html"===h&&(p=p.definition,d=function mapContentFn(e){return{typeName:"html",definition:e}});var S=Object(u.a)(m);return n.createElement("div",{className:"rc-RichTextEditView"},!c&&n.createElement(g,{content:p,courseId:t,itemId:l,promptText:S,onChange:function onChange(e){var t=s.a.extend(!0,{},i);t.definition.richText=d(e),r(t)}}),c&&n.createElement(g,{content:p,courseId:t,itemId:l,promptText:S,onChange:function onChange(e){var t=s.a.extend(!0,{},i);t.definition.richText=d(e),r(t)}}))};e.a=c},cbTo:function(module,exports,e){var t=e("BBeU"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var i={transform:void 0},r=e("aET+")(t,i);t.locals&&(module.exports=t.locals)},dN2h:function(module,e,t){"use strict";var n=t("VbXa"),i=t.n(n),r=t("SDZF"),s=t("QjDL"),a=function(e){function AlicePeerReviewSaveEvent(t){var n,i=t.courseBranchId,r=t.itemId;return(n=e.call(this,{type:s.h,courseBranchId:i})||this).itemId=r,n.id="".concat(s.h,"~").concat(i,"~").concat(r),n}return i()(AlicePeerReviewSaveEvent,e),AlicePeerReviewSaveEvent}(r.a);e.a=a},e6Tq:function(module,e,t){"use strict";var n=t("VbXa"),i=t.n(n),r=t("sbe7"),s=t.n(r),a=t("9can"),o=t("aPOU"),u=t("PSGO"),c=t("1N/A"),l=t("3H1I"),m=t("fiqM"),d=t("mk7w"),p=t("C6SX"),b=t.n(p),h=function(e){function SubmissionPartEditView(){return e.apply(this,arguments)||this}i()(SubmissionPartEditView,e);var t=SubmissionPartEditView.prototype;return t.renderEditor=function renderEditor(){var e=this.props,t=e.courseId,n=e.partId,i=e.submissionPart,r=e.update,a=e.blockSubmit,d=e.disabled,p=e.isPartReceivingInlineFeedback,b=e.submissionSchemaPart;switch(i.typeName){case"plainText":return s.a.createElement(u.a,{submissionPart:i,partId:n,id:"input-".concat(n),update:r,disabled:d});case"richText":return s.a.createElement(o.a,{submissionPart:i,update:r,disabled:d,partId:n,courseId:t,submissionSchemaPart:b});case"url":return s.a.createElement(c.a,{submissionPart:i,id:n,update:r,disabled:d});case"fileUpload":return s.a.createElement(l.a,{id:"input-".concat(n),submissionPart:i,update:r,blockSubmit:a,disabled:d,isPartReceivingInlineFeedback:p});case"offPlatform":return s.a.createElement(m.a,null);default:return!1}},t.render=function render(){var e=this.props,t=e.submissionSchemaPart,n=e.errorTree,i=e.showValidation,r=e.renderInlineNode,o=e.partId,u=t.id;return s.a.createElement("div",{className:"rc-SubmissionPartEditView",id:u},s.a.createElement("div",{className:"c-peer-review-submit-prompt"},s.a.createElement(a.a,{content:t.prompt,assumeStringIsHtml:!0,contentId:o}),r&&r(o)),this.renderEditor(),i&&n&&s.a.createElement(d.a,{errorTree:n}))},SubmissionPartEditView}(s.a.Component);e.a=h},f0vN:function(module,e,t){"use strict";var n=t("VbXa"),i=t.n(n),r=t("17x9"),s=t.n(r),a=t("sbe7"),o=t.n(a),u=t("sQ/U"),c=t("+2ZD"),l=t("IDuc"),m=t("Zr0k"),d=t("yhVA"),p=t.n(d),b=t("JOPA"),h=t.n(b),g=function(e){function SubmissionDeleteModal(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).state={deletionInProgress:!1},t.handleSubmissionDelete=function(){var e=t.props,n=e.submissionId,i=e.computedItem.id,r=e.courseId,s=e.courseSlug,a=u.a.get().id;t.setState({deletionInProgress:!0}),t.context.executeAction(m.b,{itemId:i,submissionId:n,userId:a,courseId:r,courseSlug:s})},t}var t;return i()(SubmissionDeleteModal,e),SubmissionDeleteModal.prototype.render=function render(){return this.props.showModal?o.a.createElement(c.a,{className:"rc-SubmissionDeleteModal",handleClose:this.props.onModalClose,modalName:p()("Have you reviewed your feedback?")},o.a.createElement("h3",{className:"headline-4-text title"},p()("Have you reviewed your feedback?")),o.a.createElement("p",null,p()("\n              Your feedback on this submission will be deleted when you start editing your project. You can resubmit\n              your project for feedback when you finish editing.\n            ")),o.a.createElement("div",{className:"c-modal-action-bar"},o.a.createElement(l.a,{className:"passive",onClick:this.props.onModalClose,trackingName:"edit_project_cancel"},p()("Cancel")),o.a.createElement("button",{disabled:this.state.deletionInProgress,className:"primary submission-button",onClick:this.handleSubmissionDelete},this.state.deletionInProgress?p()("Loading..."):p()("Edit my submission")))):null},SubmissionDeleteModal}(o.a.Component);g.contextTypes={executeAction:s.a.func},e.a=g},gBtg:function(module,e,t){"use strict";var n=t("VbXa"),i=t.n(n),r=t("17x9"),s=t.n(r),a=t("sbe7"),o=t.n(a),u=t("KwvP"),c=function(e){function AssignmentSubmitWrapper(){return e.apply(this,arguments)||this}i()(AssignmentSubmitWrapper,e);var t=AssignmentSubmitWrapper.prototype;return t.componentDidMount=function componentDidMount(){u.a.scroll(0)},t.render=function render(){return this.props.isSubmitted?this.props.submittedView:this.props.editView},AssignmentSubmitWrapper}(o.a.Component);c.propTypes={isSubmitted:s.a.bool.isRequired,submittedView:s.a.node.isRequired,editView:s.a.node.isRequired},e.a=c},hETs:function(module,e,t){"use strict";var n=t("VbXa"),i=t.n(n),r=t("17x9"),s=t.n(r),a=t("sbe7"),o=t.n(a),u=t("w/1P"),c=t.n(u),l=t("9can"),m=t("37kS"),d=t.n(m),p=t("1Nwa"),b=t.n(p),h=function(e){function AssignmentUpgradeChanges(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).renderChange=function(e,n){if("AddsPart"===e.typeName)return t.renderChangeItem(n,"cif-plus-square",d()("Added question."),o.a.createElement("tr",{className:"bt3-success"},o.a.createElement("th",null,d()("Added")),o.a.createElement("td",{className:"change-contents"},o.a.createElement("div",null,o.a.createElement(l.a,{assumeStringIsHtml:!0,content:e.definition.prompt})))));if("RemovesPart"===e.typeName)return t.renderChangeItem(n,"cif-minus-square",d()("Removed question."),o.a.createElement("tr",{className:"bt3-danger"},o.a.createElement("th",null,d()("Removed")),o.a.createElement("td",{className:"change-contents"},o.a.createElement("div",null,o.a.createElement(l.a,{assumeStringIsHtml:!0,content:e.definition.prompt})))));if("ChangesPart"===e.typeName){var i=e.definition.changes,r=i.find(function(e){return"ChangesPrompt"===e.typeName}),s=i.filter(function(e){return"ChangesPrompt"!==e.typeName});return t.renderChangeItem(n,"cif-square",d()("Changed question."),[o.a.createElement("tr",{className:c()({"bt3-danger":!!r}),key:"changedQuestionPrompt"},o.a.createElement("th",null,d()("Original")),o.a.createElement("td",{className:"change-contents"},o.a.createElement("div",null,o.a.createElement(l.a,{assumeStringIsHtml:!0,content:e.definition.prompt})))),r&&t.renderPartChange(r,"promptChange"),s.map(t.renderPartChange),0===i.length&&d()("Unknown change.")])}return null},t.renderPartChange=function(e,t){var n="ChangesPrompt"===e.typeName?d()("New"):"",i=!1;return"ChangesPrompt"===e.typeName?i=o.a.createElement("div",{key:t},o.a.createElement(l.a,{assumeStringIsHtml:!0,content:e.definition.newPrompt})):"ChangesPoints"===e.typeName?i=d()("The new version of this question has different point values."):"ChangesOptions"===e.typeName?i=d()("The new version of this multiple choice question has different options."):"ChangesValidationRules"===e.typeName&&(i=d()("The new version of this question allows a different set of responses.")),o.a.createElement("tr",{className:"ChangesPrompt"===e.typeName?"bt3-success":"bt3-warning",key:t},o.a.createElement("th",null,n),o.a.createElement("td",{className:"change-contents"},i))},t}i()(AssignmentUpgradeChanges,e);var t=AssignmentUpgradeChanges.prototype;return t.excludeNoChangeChanges=function excludeNoChangeChanges(e){return e.filter(function(e){return"NoChange"!==e.typeName})},t.renderChangeGroup=function renderChangeGroup(e,t){var n=this.excludeNoChangeChanges(e);return 0!==n.length&&o.a.createElement("div",null,o.a.createElement("h2",null,t),o.a.createElement("ul",{className:"cif-list-ul"},n.map(this.renderChange)))},t.renderChangeItem=function renderChangeItem(e,t,n,i){return o.a.createElement("li",{className:"change-item",key:e},o.a.createElement("i",{className:t}),o.a.createElement("span",{className:"type-of-change"},n),o.a.createElement("div",{className:"change-table-container"},o.a.createElement("table",{className:"bt3-table"},o.a.createElement("tbody",null,i))))},t.render=function render(){return o.a.createElement("div",{className:"rc-AssignmentUpgradeChanges"},this.renderChangeGroup(this.props.upgradeToCurrentAssignment.submissionSchemaChanges,d()("Assignment question changes")),this.renderChangeGroup(this.props.upgradeToCurrentAssignment.reviewSchemaChanges,d()("Review question changes")))},AssignmentUpgradeChanges}(o.a.Component);h.propTypes={upgradeToCurrentAssignment:s.a.object.isRequired},e.a=h},i4j5:function(module,e,t){"use strict";var n=t("VbXa"),i=t.n(n),r=t("w/1P"),s=t.n(r),a=t("sbe7"),o=t.n(a),u=t("17x9"),c=t.n(u),l=t("+2ZD"),m=t("hETs"),d=t("37kS"),p=t.n(d),b=function(e){function AssignmentUpgradeNotification(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).state={modalOpen:!1},t.onClickSeeChanges=function(){t.setState({modalOpen:!0})},t.onClickUpgrade=function(){t.onModalClose(),t.props.onRequestUpgrade()},t.onModalClose=function(){t.setState({modalOpen:!1})},t}i()(AssignmentUpgradeNotification,e);var t=AssignmentUpgradeNotification.prototype;return t.renderAlert=function renderAlert(){var e=s()({"bt3-alert":!0,"bt3-alert-info":!this.props.showStaleAssignmentVersionError,"bt3-alert-danger":this.props.showStaleAssignmentVersionError});return o.a.createElement("div",{className:e},p()("A new version of this assignment exists.")," ",o.a.createElement("button",{type:"button",className:"button-link",onClick:this.onClickSeeChanges},p()("Click here to see the changes and get the new version.")))},t.renderModal=function renderModal(){if(this.state.modalOpen){var e=this.props.upgradeToCurrentAssignment,t=!1,n=!1;return null!=e&&("NotifiesUser"===e.severity?(t=p()("Upgrade assignment"),n=o.a.createElement("p",null,p()('\n                The assignment changed since you started working on it. Click\n                "Upgrade assignment" to get the new assignment. Please read the\n                new assignment carefully and update your submission to follow\n                the new instructions.\n              '))):"ClearsSubmission"===e.severity&&(t=p()("Delete draft and upgrade assignment"),n=o.a.createElement("p",null,p()("\n                The assignment changed since you started working on it. We need\n                to delete your draft to give you the new assignment.\n              ")," ",o.a.createElement("strong",null,p()("\n                  Please save a copy of your submission outside Coursera before\n                  continuing.\n                "))," ",p()('\n                Click "Delete draft and upgrade assignment" to get the new\n                assignment. If you’d like to not update your assignment, you can click “Cancel” and submit your answers on the old version.\n              ')))),o.a.createElement(l.a,{handleClose:this.onModalClose,modalName:p()("New assignment version")},o.a.createElement("div",{className:"rc-AssignmentUpgradeNotification assignment-upgrade-explanation"},o.a.createElement("h3",null,p()("New assignment version")),n,null!=this.props.upgradeToCurrentAssignment&&o.a.createElement(m.a,{upgradeToCurrentAssignment:this.props.upgradeToCurrentAssignment}),o.a.createElement("div",{className:"c-modal-action-bar"},o.a.createElement("button",{type:"button",className:"bt3-btn c-modal-action-button",onClick:this.onModalClose},p()("Cancel")),o.a.createElement("button",{type:"button",className:"bt3-btn bt3-btn-success c-modal-action-button",onClick:this.onClickUpgrade},t))))}return null},t.render=function render(){var e=this.props.upgradeToCurrentAssignment;return e&&"AutomaticallyUpgrades"!==e.severity?o.a.createElement("div",{className:"rc-AssignmentUpgradeNotification"},this.renderAlert(),this.renderModal()):null},AssignmentUpgradeNotification}(o.a.Component);b.propTypes={onRequestUpgrade:c.a.func.isRequired,showStaleAssignmentVersionError:c.a.bool.isRequired,upgradeToCurrentAssignment:c.a.object},e.a=b},i5JE:function(module,exports,e){var t=e("TPZh"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var i={transform:void 0},r=e("aET+")(t,i);t.locals&&(module.exports=t.locals)},"j/mg":function(module,e,t){"use strict";var n=t("VbXa"),i=t.n(n),r=t("17x9"),s=t.n(r),a=t("sbe7"),o=t.n(a),u=t("VYij"),c=t.n(u),l=t("8cuT"),m=t.n(l),d=t("MnCE"),p=t("w/1P"),b=t.n(p),h=t("IDuc"),g=t("f0vN"),S=t("Akn8"),f=function(e){function SubmissionEditButton(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).state={showModal:!1},t.openModal=function(){t.setState({showModal:!0})},t.closeModal=function(){t.setState({showModal:!1})},t}i()(SubmissionEditButton,e);var t=SubmissionEditButton.prototype;return t.componentWillReceiveProps=function componentWillReceiveProps(e){var t=this.props,n=t.hasLoaded,i=t.isSubmitted,r=t.computedItem;n&&i&&!e.isSubmitted&&(this.context.router.push(S.a.join(r.resourcePath,"submit")),this.closeModal())},t.render=function render(){var e=this.props,t=e.hasLoaded,n=e.canDelete,i=e.submissionId,r=e.computedItem,s=e.className,a=e.courseId,u=e.courseSlug,c=e.buttonMessage;if(!t)return null;return o.a.createElement("div",null,o.a.createElement("div",{className:b()("rc-SubmissionEditButton",s)},o.a.createElement(h.a,{className:"button secondary",disabled:!n,onClick:this.openModal,trackingName:"edit_project"},c)),this.state.showModal&&o.a.createElement(g.a,{showModal:!0,computedItem:r,onModalClose:this.closeModal,submissionId:i,courseId:a,courseSlug:u}))},SubmissionEditButton}(o.a.Component);f.contextTypes={router:s.a.object},e.a=Object(d.compose)(m()(["PeerPermissionsAndProgressesStore","CourseStore"],function(e){var t=e.PeerPermissionsAndProgressesStore,n=e.CourseStore,i,r,s,a;return{hasLoaded:"loaded"===t.getState().loadState,canDelete:c()(t.getState().capabilities).contains("deleteSubmission"),isSubmitted:t.getState().isSubmitted,courseId:n.getCourseId(),courseSlug:n.getCourseSlug()}}))(f)},lH5E:function(module,exports,e){},mXC1:function(module,exports,e){},pLWS:function(module,e,t){"use strict";var n=t("8cuT"),i=t.n(n),r=t("VXRf"),s=t("VYij"),a=t.n(s),o=t("jsrg"),u=t("1xaR"),c=t("7AOT");e.a=a.a.compose(i()(["PeerPermissionsAndProgressesStore"],function(e,t){var n=e.PeerPermissionsAndProgressesStore;return{hasLoaded:"loaded"===n.getState().loadState,capabilitiesWithReasons:n.getState().capabilitiesWithReasons}}),Object(o.a)(function(e){return e.hasLoaded}),Object(r.a)(function(e){var t=!1,n=e.capabilitiesWithReasons.viewReviewSchema,i;return null!=n&&(t=n.isAllowed&&"privilegedRole"===n.reason),{criteria:Object(u.a)(e.reviewSchema).getPartsForSubmissionSchemaPart(e.partId),privilegedRoleViewReviewSchema:t}}))(c.a)},r6aM:function(module,e,t){"use strict";t.d(e,"a",function(){return getPromptText});var n=t("VYij"),i=t.n(n),r=t("tUgc"),s=t("Uh52");function getPromptText(e){var t=i.a.isObject(e.prompt),n="string"==typeof e.prompt?{}:e.prompt,a=n.typeName,o=void 0===a?"":a,u=n.definition,c=void 0===u?"":u,l="";return t&&("cml"===o&&(l=s.a.toPlainText(e.prompt)),"html"===o&&"string"==typeof c&&(l=Object(r.a)(c))),l}},s2tf:function(module,e,t){"use strict";var n=t("dN2h"),i=t("XgYJ"),r=t("xmcF");e.a=Object(r.a)(function(e){var t=e.itemId,r=e.courseBranchId,s=e.courseId,a=e.hasSaved,o=e.hasSubmitted;if(a)return new n.a({courseBranchId:r,itemId:t});if(o)return new i.a({courseBranchId:r,itemId:t});return null},function(e){var t;return{course_id:e.courseId}})(function(){return null})},tUgc:function(module,e,t){"use strict";function htmlToPlainText(e){return e.replace(/(https?:\/\/[^\s]+)/gi,"").replace(/<p>/gi," ").replace(/<([^>]+)>/gi,"").replace(/&nbsp;/gi," ")}t.d(e,"a",function(){return htmlToPlainText})},"y6f+":function(module,exports,e){},yOj8:function(module,e,t){"use strict";var n=t("VbXa"),i=t.n(n),r=t("sbe7"),s=t.n(r),a=t("oYk5"),o=t.n(a),u=t("2q9w"),c=t("F9Z8"),l=t("+2ZD"),m=t("9Cgw"),d=t("PUBa"),p=t("yhVA"),b=t.n(p),h=function(e){function PeerItemVerificationSubmission(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).state={isSubmitting:!1,isAgreementComplete:!1,confirmedPreview:!1,showPreviewModal:!1,fullName:"",hasError:!1},t.handleSubmit=function(){if(!t.props.isVerifiable)return void t.props.handleSubmit();t.setState({isSubmitting:!0,hasError:!1});var e=null;Object(d.a)().then(function(n){return e=n,Object(d.b)(e,t.state.fullName)}).then(function(){null!=e&&t.props.handleSubmit(e)}).catch(function(){return t.setState({isSubmitting:!1,hasError:!0})}).done()},t.handleClickPreview=function(){t.setState({showPreviewModal:!0})},t.handlePreviewModalClose=function(){t.props.handleSave(),t.setState({showPreviewModal:!1,confirmedPreview:!0}),o()("html, body").animate({scrollTop:0},"slow")},t.onAgreementComplete=function(e){t.setState({isAgreementComplete:!0,fullName:e})},t.onAgreementIncomplete=function(){t.setState({isAgreementComplete:!1})},t}i()(PeerItemVerificationSubmission,e);var t=PeerItemVerificationSubmission.prototype;return t.componentWillReceiveProps=function componentWillReceiveProps(e){var t=this.props.submissionAppState.submitState===m.b,n=e.submissionAppState.submitState===m.b;t&&!n?this.setState({isSubmitting:!1}):!t&&n&&this.setState({isSubmitting:!0})},t.render=function render(){var e=this.props,t=e.submissionAppState,n=e.lastSaveTime,i=e.handleSave,r=e.isVerifiable,a=e.computedItem,o=e.blockSubmit,d=this.state,p=d.isAgreementComplete,h=d.isSubmitting,g=d.hasError,S=b()("Preview"),f=this.handleClickPreview;return this.state.confirmedPreview&&(S=b()("Submit"),f=this.handleSubmit),s.a.createElement("div",{className:"rc-PeerItemVerificationSubmission",style:{marginTop:30}},r&&s.a.createElement(c.a,{onAgreementComplete:this.onAgreementComplete,onAgreementIncomplete:this.onAgreementIncomplete,isShownInsideModal:!1}),s.a.createElement(u.a,{lastSaveTime:n,isSaving:t.saveState===m.a,isSubmitting:h,onSave:i,onSubmit:f,submitMessage:S,isSubmitDisabled:r&&!p||o,computedItem:a}),g&&s.a.createElement("div",{className:"align-right caption-text",style:{marginTop:12}},b()("An error has occurred while submitting. Please try again.")),this.state.showPreviewModal&&s.a.createElement(l.a,{className:"rc-SubmissionPreviewModal",handleClose:this.handlePreviewModalClose,modalName:b()("Ready to Submit?")},s.a.createElement("h3",{className:"headline-4-text title"},b()("Ready to Submit?")),s.a.createElement("div",null,b()("Great work! Before you submit, please take a moment to look over your work once more so that\n               you can get a preview of what it will look like to others who will be reviewing your work.")),s.a.createElement("div",{className:"horizontal-box align-items-right"},s.a.createElement("button",{className:"primary",onClick:this.handlePreviewModalClose},b()("Preview")))))},PeerItemVerificationSubmission}(s.a.Component);e.a=h}}]);
//# sourceMappingURL=34.6f5baaa88eb2b55a45f3.js.map